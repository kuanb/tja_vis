<!DOCTYPE HTML>
<html>
	<head>

		<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" />
		<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />

		<script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>

		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
		
		<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/0.4.0/leaflet.markercluster-src.js"></script>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>




<!-- WHEN NO INTERNET
		<script src="lib/jquery-1.9.1.min.js"></script>

		<script src="lib/bootstrap.min.js"></script>
		<link rel="stylesheet" type="text/css" href="lib/bootstrap.min.css">
		
		<link rel="stylesheet" href="lib/leaflet.css" />
		<script src="lib/leaflet.js"></script>

		<script src="lib/markerclusterer_compiled.js"></script>

		<script src="lib/Chart.min.js"></script>
 -->

		<link rel="stylesheet" href="style.css" />
		<script src="analyze.js"></script>
	</head>

	<body>
		<div id="map"></div>

		<div class="container">
			<h2>Explore Applicants</h2>

			<div class="dropdown pull-right">
				<button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Select Variable
				<span class="caret"></span></button>
				<ul class="dropdown-menu">
					<li onclick="buildChart('race')"><a href="#chart">Race</a></li>
					<li onclick="buildChart('ethnicity')"><a href="#chart">Ethnicity</a></li>
					<li onclick="buildChart('sex')"><a href="#chart">Gender</a></li>
					<li onclick="buildChart('prior_training')"><a href="#chart">Prior Training</a></li>
					<li onclick="buildChart('pipeline')"><a href="#chart">Pipeline</a></li>
					<li onclick="buildChart('other_commitments')"><a href="#chart">Other Commitments</a></li>
					<li onclick="buildChart('employment')"><a href="#chart">Employment</a></li>
					<li onclick="buildChart('education')"><a href="#chart">Education</a></li>
					<li onclick="buildChart('dob')"><a href="#chart">Age</a></li>
					<li onclick="buildChart('veteran')"><a href="#chart">Veteran</a></li>
					<li onclick="buildChart('veteran_spouse')"><a href="#chart">Veteran Spouse</a></li>
					<li onclick="buildChart('avg_score')"><a href="#chart">Averaged Score</a></li>
					<li onclick="buildChart('tabe_math')"><a href="#chart">TABE Math</a></li>
					<li onclick="buildChart('tabe_read')"><a href="#chart">TABE Reading</a></li>
				</ul>
			</div>

			<div class="btn pull-right" onclick="toggleCB()">
				<input type="checkbox" id="tabeFilter"/>
				Filter by Tabe 
			</div>

			<div class="btn pull-right">
				Threshold Math: 
				<input type="number" id="threshMath"
					min="0" max="15" step="0.5" value="11">
				Reading: 
				<input type="number" id="threshRead" 
					min="0" max="15" step="0.5" value="10">
			</div>
			

			<p>Use the dropdown to select which variable you want to visualize.</p>

			<canvas id="chart" class="chart"></canvas>



			<h4>Screendoor Comparison</h4>
			<p>Analyzing scoring on Screendoor against scores on TABE tests. <span style="font-weight:bold;color:grey">Grey</span> is reading, <span style="font-weight:bold;color:blue">blue</span> is math, and <span style="font-weight:bold;color:red">red</span> is our average score froms Screendoor mapped to the TABE score values.</p>

			<canvas id="chart2" class="chart"></canvas>

			<h4>Predictive Correlation Analysis</h4>
			<p style="max-width: 43%; float: left; padding-right: 20px">
				Do our scores have any correlation with the TABE results? Run calculations by average score. Early results suggest Screendoor average scores don't correlate significantly with TABE scoring.

				<br><br>

				Threshold Screendoor Score (%): 
				<input type="number" id="threshScreendoor"
					min="0" max="100" step="10" value="90">
				<button onclick="buildCorrAnalysis()">Rerun</button>

				<br><br>

				<br>Explanation of graph: </b><br>
				<span style="font-weight:bold;color:red">Red</span> values indicate number of applications that fall below the set threshold for math or reading. <span style="font-weight:bold;color:blue">Blue</span> represents the count of those that are at or above that threshold.

				<br><br>
				
				The first two sets of bars are those that fall under your set Screendoor rank and the second two sets bars represent the results that lie over the set %.


			</p>
			
			<canvas id="chart3" class="chart"></canvas>
			



			<div id="splashBlock" style="position: fixed; width: 100%; height: 100%; z-index: 99999999; top: 0px; left: 0px; background-color: #2B3856; display: block; overflow: hidden; text-align: center;padding-top: 200px; color: #FFF">
				Intended for Microsoft TCE only - click to continue.

				<br><br><br><br>

				<button type="button" class="btn btn-info btn-lg"
					onclick="removeSplash()" style="border-radius:0px">
					<span class="glyphicon glyphicon-object-align-bottom"></span> View Results
				</button>
			</div>

		</div>


	</body>

	<script>
		var map = L.map('map').setView([40.75, -73.85], 11);
		map.scrollWheelZoom.disable();
		L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png').addTo(map);

		function toggleCB () {
			$('#tabeFilter')[0].checked = !$('#tabeFilter')[0].checked;
		};

		function removeSplash () {
			$('#splashBlock')[0].remove();
		};
	</script>

</html>